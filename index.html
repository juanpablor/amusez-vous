<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title></title>
    <!-- Bootstrap CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH" crossorigin="anonymous">
    <!-- Custom CSS for Bootstrap Colors -->
    <link rel="stylesheet" href="style.css">
</head>
<body>

    <div class="container" id="content"></div>

    <!-- Modal -->
    <div class="modal fade" id="productModal" tabindex="-1" aria-labelledby="productModalLabel" aria-hidden="true">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header random-background">
                    <h5 class="modal-title" id="modalProductName">Product Details</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body">
                    <img id="modalProductImage" src="" alt="Product Image" class="img-fluid mb-3" />
                    <p id="modalProductSize"></p>
                    <p id="modalProductPrice"></p>
                </div>
                <div class="modal-footer random-background">
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
                </div>
            </div>
        </div>
    </div>

    <!-- Bootstrap Bundle with Popper -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js" integrity="sha384-YvpcrYf0tY3lHB60NNkmXc5s9fDVZLESaAA55NDzOxhy9GkcIdslK1eN7N6jIeHz" crossorigin="anonymous"></script>

    <script>
        // Función para cargar el archivo JSON
        async function loadJSON() {
            const response = await fetch('data.json');
            const data = await response.json();
            displayData(data);
            // Llamar a la función de cambio de fondo aleatorio después de que se muestre la data
            changeRandomBackground();
        }

        // Función para mostrar los datos JSON en el HTML
        function displayData(data) {
            // Actualizar el título del documento
            document.title = data.companyName;

            const contentDiv = document.getElementById('content');

            // Contenedor para logo de la compañía y nombre de la compañía
            const headerContainer = document.createElement('section');
            headerContainer.className = 'header-container d-flex';

            // Crear un contenedor para el logo
            const logoContainer = document.createElement('article');
            logoContainer.className = 'logo-container my-3 d-flex';

            // Mostrar logo de la compañía
            const mainLogo = document.createElement('img');
            mainLogo.className = 'img-fluid align-self-center';
            mainLogo.src = `img/${data.mainLogo}`; // Ajuste para mostrar la imagen
            mainLogo.alt = `${data.companyName} Logo`;
            logoContainer.appendChild(mainLogo);

            headerContainer.appendChild(logoContainer);

            // Crear un contenedor para los correos electrónicos y teléfonos
            const contactInfo = document.createElement('div');
            contactInfo.className = 'contact-info-container';

            // Mostrar nombre de la compañía
            const companyName = document.createElement('h1');
            companyName.className = 'text-primary text-center brown-font mt-2 align-items-center d-flex mystery-font justify-content-center';
            companyName.textContent = data.companyName;
            contactInfo.appendChild(companyName);

            const reservationMail = document.createElement('p');
            reservationMail.className = 'orange-font lh-1 indie-flower-font fs-5';
            reservationMail.textContent = `${data.reservationMail} ${data.email}`;
            contactInfo.appendChild(reservationMail);
            
            const reservationPhone = document.createElement('p');
            reservationPhone.className = 'orange-font lh-1 indie-flower-font fs-5';
            reservationPhone.textContent = `${data.reservationPhone} ${data.phone}`;
            contactInfo.appendChild(reservationPhone);

            headerContainer.appendChild(contactInfo);
            contentDiv.appendChild(headerContainer);

            // Contenedor para productos e introducción
            const productsContainer = document.createElement('div');
            productsContainer.className = 'products-container';

            // Crear una fila para las tarjetas de productos
            const productsRow = document.createElement('div');
            productsRow.className = 'row';
            data.products.forEach(product => {
                const productCol = document.createElement('div');
                productCol.className = 'col-md-6 col-xs-2 mb-4';

                const productCard = document.createElement('div');
                productCard.className = 'card';

                // Crear un contenedor para la imagen
                const productImgContainer = document.createElement('div');
                productImgContainer.className = 'image-container d-flex justify-content-center my-3';

                const productImg = document.createElement('img');
                productImg.src = `img/${product.image}`;
                productImg.className = 'card-img-top mx-5';
                productImg.alt = `${product.name} Image`;
                productImg.style.height = '226px';

                // Añadir la imagen al contenedor de la imagen
                productImgContainer.appendChild(productImg);

                const iconCTA = document.createElement('img');
                iconCTA.src = 'img/tap.svg';
                iconCTA.className = 'icon-cta position-absolute';
                iconCTA.alt = 'Tap to open';

                // Añadir la imagen al contenedor de la imagen
                productImgContainer.appendChild(iconCTA);

                const productCardBody = document.createElement('div');
                productCardBody.className = 'card-body random-background bg-fixed';

                const productLink = document.createElement('a');
                productLink.href = '#';
                productLink.className = 'stretched-link';
                productLink.dataset.bsToggle = 'modal';
                productLink.dataset.bsTarget = '#productModal';
                productLink.onclick = () => showProductDetails(product);

                const productCardText = document.createElement('p');
                productCardText.className = 'card-text text-center m-0 mochiy-pop-font fs-3  text-white';
                productCardText.textContent = product.name;

                productCardBody.appendChild(productCardText);
                productCardBody.appendChild(productLink);

                // Añadir el contenedor de la imagen y el cuerpo de la tarjeta al productCard
                productCard.appendChild(productImgContainer);
                productCard.appendChild(productCardBody);

                productCol.appendChild(productCard);
                productsRow.appendChild(productCol);
            });
            productsContainer.appendChild(productsRow);

            contentDiv.appendChild(productsContainer);

            // Crear un contenedor div con clase row para introTitle e introParagraph
            const introContainer = document.createElement('div');
            introContainer.className = 'row my-4 p-2 bg-primary';

            // Mostrar introducción
            const introTitle = document.createElement('h2');
            introTitle.className = 'text-white mystery-font text-center mt-3';
            introTitle.textContent = data.descriptions.introduction[0].title;
            introContainer.appendChild(introTitle);
            
            const introParagraph = document.createElement('p');
            introParagraph.className = 'text-white fs-4';
            introParagraph.textContent = data.descriptions.introduction[1].descriptions.map(paragraph => paragraph.join(' ')).join('\n');
            introContainer.appendChild(introParagraph);

            productsContainer.appendChild(introContainer);

            // Contenedor para reglas de seguridad y reglas de arrendatario
            const rulesContainer = document.createElement('div');
            rulesContainer.className = 'row my-4 p-2 bg-primary';

            // Mostrar reglas de seguridad
            const rulesTitle = document.createElement('h2');
            rulesTitle.className = 'card-text text-center mt-2 mochiy-pop-font fs-3 text-white';
            rulesTitle.textContent = data.descriptions.rules[0].title;
            rulesContainer.appendChild(rulesTitle);

            const rulesList = document.createElement('ul');
            rulesList.className = 'list-group my-5';
            data.descriptions.rules[1].rulesItems.forEach(rule => {
                const listItem = document.createElement('li');
                listItem.className = 'list-group-item';
                listItem.textContent = rule[0];
                rulesList.appendChild(listItem);
            });
            rulesContainer.appendChild(rulesList);

            // Mostrar reglas de arrendatario
            const rulesTenantTitle = document.createElement('h2');
            rulesTenantTitle.className = 'card-text text-center m-0 mochiy-pop-font fs-3 text-white';
            rulesTenantTitle.textContent = data.descriptions.rulesTenant[0].title;
            rulesContainer.appendChild(rulesTenantTitle);

            const rulesTenantList = document.createElement('ul');
            rulesTenantList.className = 'list-group mt-5';
            data.descriptions.rulesTenant[1].rulesItems.forEach(rule => {
                const listItem = document.createElement('li');
                listItem.className = 'list-group-item';
                listItem.textContent = rule[0];
                rulesTenantList.appendChild(listItem);
            });
            rulesContainer.appendChild(rulesTenantList);

            contentDiv.appendChild(rulesContainer);
        }

        // Función para mostrar los detalles del producto en el modal
        function showProductDetails(product) {
            document.getElementById('modalProductName').textContent = product.name;
            document.getElementById('modalProductImage').src = `img/${product.image}`;
            document.getElementById('modalProductSize').textContent = `Size: ${product.size}`;
            document.getElementById('modalProductPrice').textContent = `Price: ${product.price}`;
        }

        // Función para cambiar aleatoriamente la clase de fondo
        function changeRandomBackground() {
            const elements = document.querySelectorAll('.random-background');
            const numberOfColors = 12; // Número total de colores definidos
            elements.forEach(element => {
                // Quitar cualquier clase previa de fondo aleatorio
                for (let i = 1; i <= numberOfColors; i++) {
                    element.classList.remove(`random-background-${i}`);
                }
                // Añadir una clase aleatoria de fondo
                const randomColorClass = `random-background-${Math.floor(Math.random() * numberOfColors) + 1}`;
                element.classList.add(randomColorClass);
            });
        }

        // Cargar y mostrar el JSON al cargar la página
        window.onload = loadJSON;
    </script>
</body>
</html>
